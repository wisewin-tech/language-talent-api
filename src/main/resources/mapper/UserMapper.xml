<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 【用户】 -->
<mapper namespace="com.wisewin.api.dao.UserDAO">

    <!--通过phone查看库里有没有这个账号-->
    <select id="selectByPhone" resultType="com.wisewin.api.entity.bo.UserBO">
        select
        id,nickname,mobile,status
        from
        lt_user
        where
        mobile=#{phone}
    </select>

    <insert id="insertUser"     parameterType="com.wisewin.api.entity.bo.UserBO"
            useGeneratedKeys="true" keyProperty="id">

        insert into lt_user(
        nickname,birthday,sex,password,mobile
        )values(
        #{nickname},#{birthday},#{sex},#{password},#{mobile}
        )

    </insert>


    <update id="updateUser" parameterType="com.wisewin.api.entity.param.UserParam">
        update lt_user
        <set>

            <if test="nickname!=null">         nickname=#{nickname},</if>
            <if test="password!=null">         password=#{password},</if>
            <if test="sex!=null">              sex=#{sex},</if>
            <if test="ageGroup!=null">         age_group=#{ageGroup},</if>
            <if test="learningGoal!=null">     learning_goal=#{learningGoal},</if>
            <if test="birthday!=null">         birthday=#{birthday}</if>
            <if test="headPortraitUrl!=null">  head_portrait_url=#{headPortraitUrl}</if>
            <if test="headPortraitUrl!=null">  head_portrait_url=#{headPortraitUrl}</if>
            <if test="headPortraitUrl!=null">  head_portrait_url=#{headPortraitUrl}</if>

        </set>
        where
        id=#{id}
    </update>
    <!--通过id查找用户信息-->
    <select id="selectById" resultType="com.wisewin.api.entity.bo.UserBO">
        select
        id,nickname,birthday,sex,mobile,currency,career,head_portrait_url,integral,
        continuous_learning,cumulative_learning,study_date
        from
        lt_user
        where
        id=#{id}
    </select>

    <!--后面的所有留待备用-->
    <update id="updatePassword" parameterType="com.wisewin.api.entity.bo.UserBO">
        update lt_user
        <set>

            <if test="password!=null">
                password=#{password}
            </if>

        </set>
        where
        phone=#{phone}
    </update>

    <!--通过用户名查询用户信息-->
    <select id="selectUserByUsername" resultType="com.wisewin.api.entity.bo.UserBO">
        select
        id,name,phone,password,birthday,gender
        from
        lt_user
        where
        name=#{name}
    </select>

</mapper>